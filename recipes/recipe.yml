---
# yaml-language-server: $schema=https://schema.blue-build.org/recipe-v1.json
# image will be published to ghcr.io/<user>/<name>
name: brimstone
# description will be included in the image's metadata
description: best of both worlds gaming and development with Cosmic DE

# the base image to build on top of (FROM) and the version tag to use
base-image: ghcr.io/ublue-os/bazzite-gnome
image-version: stable

# module configuration, executed in order
# you can include multiple instances of the same module
modules:
  - type: dnf
    group-install:
      with-optional: true
      packages:
      - cosmic-desktop
    install:
      skip-unavailable: true
      packages:
      # All gpg subpackages to fix issues with yubikey pgp smartcard
      - gnupg2-dirmngr
      - gnupg2-g13
      - gnupg2-gpg
      - gnupg2-gpgconf
      - gnupg2-keyboxd
      - gnupg2-scdaemon
      - gnupg2-smime
      - gnupg2-utils
      - gnupg2-verify
      - gnupg2-wks
      # other helpful devy tools
      - android-tools
      - bcc
      - bpftop
      - bpftrace
      - ccache
      - flatpak-builder
      - git-subtree
      - nicstat
      - numactl
      - podman-machine
      - podman-tui
      - qemu-kvm
      - restic
      - rclone
      - sysprof
      - tiptop
      - usbmuxd
      - zsh
    remove:
      packages:
        - firefox
        - firefox-langpacks

  - type: systemd
    system:
      disabled:
        - gdm.service
      enabled:
        - cosmic-greeter.service

  - type: fonts
    fonts:
      nerd-fonts:
        - FiraCode # don't add spaces or "Nerd Font" suffix
        - Hack
        - SourceCodePro
        - Terminus
        - JetBrainsMono
        - NerdFontsSymbolsOnly
        - RecMono
        - IosevkaTermSlab

  - type: chezmoi
    repository: https://github.com/arades79/dotfiles
    branch: main

  - type: signing # this sets up the proper policy & signing files for signed images to work fully
